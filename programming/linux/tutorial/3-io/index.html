<!DOCTYPE html><html lang="en-US"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0"><meta name="theme-color" content="#0078E7"><meta name="author" content="Rebuild"><meta name="copyright" content="Rebuild"><meta name="generator" content="Hexo 5.4.1"><meta name="theme" content="hexo-theme-yun"><title>GNU/Linux Introduction Chapter 3 | Rebuild's Album</title><link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Noto+Serif+SC:wght@900&amp;display=swap" media="print" onload="this.media='all'"><link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Noto+Serif+SC:wght@500;900&amp;family=Fira+Mono:wght@500&amp;family=Source+Sans+Pro&amp;display=swap" media="print" onload="this.media='all'"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/star-markdown-css@0.2.4/dist/yun/yun-markdown.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/prism-theme-vars/base.css"><script src="//at.alicdn.com/t/font_1140697_dxory92pb0h.js" async></script><script src="https://cdn.jsdelivr.net/npm/@unocss/runtime/mini.global.js"></script><script src="https://cdn.jsdelivr.net/npm/scrollreveal/dist/scrollreveal.min.js" defer></script><script>function initScrollReveal() {
  [".post-card",".markdown-body img"].forEach((target)=> {
    ScrollReveal().reveal(target);
  })
}
document.addEventListener("DOMContentLoaded", initScrollReveal);
document.addEventListener("pjax:success", initScrollReveal);
</script><link rel="icon" type="image/png" href="/favicon.png"><link rel="mask-icon" href="/favicon.png" color="#0078E7"><link rel="preload" href="/css/hexo-theme-yun.css" as="style"><link rel="prefetch" href="/js/sidebar.js" as="script"><link rel="preconnect" href="https://cdn.jsdelivr.net" crossorigin><script id="yun-config">
    window.Yun = {}
    window.CONFIG = {"hostname":"www.rebuild.moe","root":"/","title":"暁の花、咲きけり","version":"1.8.11","mode":"auto","copycode":true,"page":{"isPost":true},"i18n":{"placeholder":"検索...","empty":"${query} が見つかりませんでした.","hits":"${hits} 件見つかりました","hits_time":"${hits} 件見つかりました, ${time} ミリ秒"},"anonymous_image":"https://cdn.jsdelivr.net/gh/YunYouJun/cdn/img/avatar/none.jpg","say":{"api":"https://v1.hitokoto.cn","hitokoto":true},"local_search":{"path":"/search.xml"},"fireworks":{"colors":null},"vendors":{"darken":"https://cdn.jsdelivr.net/npm/darken@1.5.0"}};
  </script><link rel="stylesheet" href="/css/hexo-theme-yun.css"><script src="/js/hexo-theme-yun.js" type="module"></script><link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Noto+Serif+SC:wght@500;900&amp;family=Fira+Mono:wght@500&amp;family=Source+Sans+Pro&amp;display=swap"><meta name="description" content="Chapter 3: I&#x2F;O   Standard I&#x2F;OMaybe you have heard of standard in or out (stdin or stdout) before. If you use Java, you must be familiar with two streams: System.in and System.out. They are I&#x2F;O st">
<meta property="og:type" content="article">
<meta property="og:title" content="GNU&#x2F;Linux Introduction Chapter 3">
<meta property="og:url" content="https://www.rebuild.moe/programming/linux/tutorial/3-io/index.html">
<meta property="og:site_name" content="Rebuild&#39;s Album">
<meta property="og:description" content="Chapter 3: I&#x2F;O   Standard I&#x2F;OMaybe you have heard of standard in or out (stdin or stdout) before. If you use Java, you must be familiar with two streams: System.in and System.out. They are I&#x2F;O st">
<meta property="og:locale" content="en_US">
<meta property="article:published_time" content="2022-03-12T01:41:39.179Z">
<meta property="article:modified_time" content="2022-03-12T01:41:39.179Z">
<meta property="article:author" content="Rebuild">
<meta property="article:tag" content="Programming">
<meta property="article:tag" content="Linux">
<meta name="twitter:card" content="summary"><script>(function() {
  const prefersDark = window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches
  const setting = localStorage.getItem('darken-mode') || 'auto'
  if (setting === 'dark' || (prefersDark && setting !== 'light'))
    document.documentElement.classList.toggle('dark', true)
})()</script></head><body><script defer src="https://cdn.jsdelivr.net/npm/animejs@latest"></script><script defer src="/js/ui/fireworks.js" type="module"></script><canvas class="fireworks"></canvas><div class="container"><a class="sidebar-toggle hty-icon-button" id="menu-btn"><div class="hamburger hamburger--spin" type="button"><span class="hamburger-box"><span class="hamburger-inner"></span></span></div></a><div class="sidebar-toggle sidebar-overlay"></div><aside class="sidebar"><script src="/js/sidebar.js" type="module"></script><ul class="sidebar-nav"><li class="sidebar-nav-item sidebar-nav-toc hty-icon-button sidebar-nav-active" data-target="post-toc-wrap" title="見出し"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-list-ordered"></use></svg></li><li class="sidebar-nav-item sidebar-nav-overview hty-icon-button" data-target="site-overview-wrap" title="概要"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-passport-line"></use></svg></li></ul><div class="sidebar-panel" id="site-overview-wrap"><div class="site-info fix-top"><a class="site-author-avatar" href="/about/" title="Rebuild"><img width="96" loading="lazy" src="/images/avatar.jpg" alt="Rebuild"><span class="site-author-status" title="哭哭">🥺</span></a><div class="site-author-name"><a href="/about/">Rebuild</a></div><a class="site-name" href="/about/site.html">Rebuild's Album</a><sub class="site-subtitle">With love of Darkness and Fire</sub><div class="site-desciption">The combination of cuteness and evil</div></div><nav class="site-state"><a class="site-state-item hty-icon-button icon-home" href="/" title="ホーム"><span class="site-state-item-icon"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-home-4-line"></use></svg></span></a><div class="site-state-item"><a href="/archives/" title="アーカイブ"><span class="site-state-item-icon"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-archive-line"></use></svg></span><span class="site-state-item-count">14</span></a></div><div class="site-state-item"><a href="/categories/" title="カテゴリ"><span class="site-state-item-icon"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-folder-2-line"></use></svg></span><span class="site-state-item-count">10</span></a></div><div class="site-state-item"><a href="/tags/" title="タグ"><span class="site-state-item-icon"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-price-tag-3-line"></use></svg></span><span class="site-state-item-count">16</span></a></div><a class="site-state-item hty-icon-button" target="_blank" rel="noopener" href="https://git.rebuild.moe" title="Neko Git"><span class="site-state-item-icon"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-external-link-line"></use></svg></span></a></nav><hr style="margin-bottom:0.5rem"><div class="links-of-author"><a class="links-of-author-item hty-icon-button" rel="noopener" href="http://wpa.qq.com/msgrd?v=3&amp;uin=714026292&amp;site=qq&amp;menu=yes" title="QQ" target="_blank" style="color:#12B7F5"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-qq-line"></use></svg></a><a class="links-of-author-item hty-icon-button" rel="noopener" href="https://github.com/Shimogawa" title="GitHub" target="_blank" style="color:#181717"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-github-line"></use></svg></a><a class="links-of-author-item hty-icon-button" rel="noopener" href="mailto:admin@rebuild.moe" title="E-Mail" target="_blank" style="color:#8E71C1"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-mail-line"></use></svg></a><a class="links-of-author-item hty-icon-button" rel="noopener" href="https://music.163.com/#/user/home?id=267787075" title="NetEase Cloud Music" target="_blank" style="color:#C10D0C"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-netease-cloud-music-line"></use></svg></a><a class="links-of-author-item hty-icon-button" rel="noopener" href="https://space.bilibili.com/2059527" title="Bilibili" target="_blank" style="color:#FF8EB3"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-bilibili-line"></use></svg></a><a class="links-of-author-item hty-icon-button" rel="noopener" href="https://twitter.com/nanomikairete" title="Twitter" target="_blank" style="color:#1da1f2"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-twitter-line"></use></svg></a></div><hr style="margin:0.5rem 1rem"><div class="links"><a class="links-item hty-icon-button" href="/links/" title="Boys (maybe girls) Next Door" style="color:dodgerblue"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-genderless-line"></use></svg></a><a class="links-item hty-icon-button" href="/girls/" title="可爱的女孩子" style="color:pink"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-women-line"></use></svg></a></div><br><a class="links-item hty-icon-button" id="toggle-mode-btn" href="javascript:;" title="Mode" style="color: #f1cb64"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-contrast-2-line"></use></svg></a></div><div class="sidebar-panel sidebar-panel-active" id="post-toc-wrap"><div class="post-toc"><div class="post-toc-content"><ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#Standard-I-O"><span class="toc-number">1.</span> <span class="toc-text">Standard I&#x2F;O</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#File-Descriptors"><span class="toc-number">1.1.</span> <span class="toc-text">File Descriptors</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#I-O-in-Shells"><span class="toc-number">2.</span> <span class="toc-text">I&#x2F;O in Shells</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#Redirecting-Output"><span class="toc-number">2.1.</span> <span class="toc-text">Redirecting Output</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Pipes"><span class="toc-number">2.2.</span> <span class="toc-text">Pipes</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Notes-and-References"><span class="toc-number">3.</span> <span class="toc-text">Notes and References</span></a></li></ol></div></div></div></aside><main class="sidebar-translate" id="content"><div id="post"><article class="hty-card post-block" itemscope itemtype="https://schema.org/Article" style="--smc-primary:#0078E7;"><link itemprop="mainEntityOfPage" href="https://www.rebuild.moe/programming/linux/tutorial/3-io/"><span hidden itemprop="author" itemscope itemtype="https://schema.org/Person"><meta itemprop="name" content="Rebuild"><meta itemprop="description"></span><span hidden itemprop="publisher" itemscope itemtype="https://schema.org/Organization"><meta itemprop="name" content="Rebuild's Album"></span><header class="post-header"><h1 class="post-title" itemprop="name headline">GNU/Linux Introduction Chapter 3</h1><div class="post-meta"><div class="post-time"><span class="post-meta-item-icon"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-calendar-line"></use></svg></span> <time title="作成日：2022-03-12 09:41:39" itemprop="dateCreated datePublished" datetime="2022-03-12T09:41:39+08:00">2022-03-12</time></div><div class="post-classify"><span class="post-category"> <span class="post-meta-item-icon" style="margin-right:3px;"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-folder-line"></use></svg></span><span itemprop="about" itemscope itemtype="https://schema.org/Thing"><a class="category-item" href="/categories/Programming/" style="--text-color:var(--hty-text-color)" itemprop="url" rel="index"><span itemprop="text">Programming</span></a></span> > <span itemprop="about" itemscope itemtype="https://schema.org/Thing"><a class="category-item" href="/categories/Programming/Linux/" style="--text-color:var(--hty-text-color)" itemprop="url" rel="index"><span itemprop="text">Linux</span></a></span></span><span class="post-tag"><span class="post-meta-divider">-</span><a class="tag-item" href="/tags/Programming/" style="--text-color:var(--hty-text-color)"><span class="post-meta-item-icon"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-price-tag-3-line"></use></svg></span><span class="tag-name">Programming</span></a><a class="tag-item" href="/tags/Linux/" style="--text-color:var(--hty-text-color)"><span class="post-meta-item-icon"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-price-tag-3-line"></use></svg></span><span class="tag-name">Linux</span></a></span></div></div></header><section class="post-body" itemprop="articleBody"><div class="post-content markdown-body"><div align="center" style="font-size: 33px"><b>
    Chapter 3: I/O
</b></div>

<h2 id="Standard-I-O"><a href="#Standard-I-O" class="headerlink" title="Standard I/O"></a>Standard I/O</h2><p>Maybe you have heard of standard in or out (<code>stdin</code> or <code>stdout</code>) before. If you use Java, you must be familiar with two streams: <code>System.in</code> and <code>System.out</code>. They are I/O streams onto the terminal, or <code>tty</code>. I don’t want to confuse you as well as myself, so for now let’s just say the standard I/O prints and gets text to and from the console screen.</p>
<h3 id="File-Descriptors"><a href="#File-Descriptors" class="headerlink" title="File Descriptors"></a>File Descriptors</h3><p>When it comes to I/O, you might first think of files. In Linux, files are accessed by <strong>file descriptors</strong>. The file descriptors are integers given by the kernel when you want to access (say, read or write) a file. The descriptor allows you to have access to the file as well as its information or metadata. For example, in C, if you want to open and read from a file <strong>with system calls</strong> (instead of using standard libraries that makes the call and wrap around for you), you will use the function <code>int open(const char *pathname, int flags)</code> and <code>ssize_t read(int fd, void *buf, size_t count)</code>. For more you can read <code>man 2 open</code> and <code>man 2 read</code>. An example program will be</p>
<pre class="line-numbers language-c" data-language="c"><code class="language-c"><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;sys/types.h></span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;sys/stat.h></span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;fcntl.h></span>      <span class="token comment">// file control flags</span></span>

<span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
    <span class="token keyword">int</span> fd <span class="token operator">=</span> <span class="token function">open</span><span class="token punctuation">(</span><span class="token string">"/home/rebuild/a.txt"</span><span class="token punctuation">,</span> O_RDONLY<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">char</span> buf<span class="token punctuation">[</span><span class="token number">1024</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
    <span class="token class-name">ssize_t</span> bytes_read<span class="token punctuation">;</span>
    <span class="token keyword">while</span> <span class="token punctuation">(</span><span class="token punctuation">(</span>bytes_read <span class="token operator">=</span> <span class="token function">read</span><span class="token punctuation">(</span>fd<span class="token punctuation">,</span> buf<span class="token punctuation">,</span> <span class="token number">1024</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">></span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
        <span class="token comment">// ...</span>
    <span class="token punctuation">&#125;</span>
    <span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<p>Now, I will introduce 3 special file descriptors: 0, 1, and 2. They are reserved and will always exist. They represent <code>stdin</code>, <code>stdout</code>, and <code>stderr</code>, respectively. File descriptor 0 is read only, and file descriptors 1 and 2 are write only. You can easily use them since you don’t need to manually open them. Just use them as simple as</p>
<pre class="line-numbers language-c" data-language="c"><code class="language-c"><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">define</span> <span class="token macro-name">STDOUT</span> <span class="token expression"><span class="token number">1</span></span></span>

<span class="token comment">// ...</span>

<span class="token function">write</span><span class="token punctuation">(</span>STDOUT<span class="token punctuation">,</span> <span class="token string">"hello, world!"</span><span class="token punctuation">,</span> <span class="token number">14</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<p>In Linux, standard I/O have another appearance as device files so that standard I/O can also be interpreted as file I/O. Go to <code>/dev/fd</code> using <code>cd</code>. If you list files using <code>ls -la</code>, there must be 3 entries as follows.</p>
<pre class="line-numbers language-none"><code class="language-none">lrwx------ 1 root root 64 Oct 29 14:18 0 -&gt; &#x2F;dev&#x2F;pts&#x2F;0
lrwx------ 1 root root 64 Oct 29 14:18 1 -&gt; &#x2F;dev&#x2F;pts&#x2F;0
lrwx------ 1 root root 64 Oct 29 14:18 2 -&gt; &#x2F;dev&#x2F;pts&#x2F;0<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre>

<p>They actually all point to <code>dev/pts/0</code>, which stands for the <strong>p</strong>seudo <strong>t</strong>erminal<strong>s</strong> (pty for short). This is the number 0 of the ptys. There may be many ptys under this folder, and you can use <code>tty</code> command to check which pty are you using for your own shell. It’s just a readable and writable device file representing the terminal. We will talk more on this when we use redirection in the next chapter.</p>
<p>With this knowledge in mind, let’s learn some I/O in shell.</p>
<h2 id="I-O-in-Shells"><a href="#I-O-in-Shells" class="headerlink" title="I/O in Shells"></a>I/O in Shells</h2><blockquote>
<p>For anything related to shell starting from this point, I will use Bash as an example. Check your shell using <code>echo $SHELL</code>. If it’s not <code>/bin/bash</code>, please type <code>/bin/bash</code> to switch to Bash.</p>
</blockquote>
<h3 id="Redirecting-Output"><a href="#Redirecting-Output" class="headerlink" title="Redirecting Output"></a>Redirecting Output</h3><p>Now we know that I/O includes all of files and standard streams (and also devices). Now, let’s manipulate I/O in shells and forget about programs for now.</p>
<p>I have never told you how to write to a file before. Let’s suppose for now that we don’t have text editors, not even <code>vim</code>, <code>emacs</code>, <code>nano</code>, or <code>ed</code>. How to write to a file? Well, we have to use <strong>output redirection</strong>. The operator for this operation in shells is <code>&gt;</code>. For example, if we want to write <code>Hello, world</code> to a file <code>a.txt</code>, we can simply use <code>echo -n &quot;Hello, world&quot; &gt; a.txt</code>. The <code>-n</code> option means that no additional new line character <code>\n</code> will be printed. Here, <code>echo</code> will print whatever you wrote to <code>stdout</code>, and <code>&gt;</code> will <strong>redirect</strong> <code>stdout</code> to whatever follows, <code>a.txt</code> in this example. </p>
<p>Let’s do one more useful example. Say a program will print huge amounts of useless information to the screen and you don’t want to see them. <code>head -n 10 /dev/urandom</code> will be great example. The <code>head</code> command by default reads the first 10 lines from a file (to peek the head of a file). You can specify the number of lines to read by using the <code>-n &lt;number&gt;</code> option. <code>/dev/urandom</code> is a special file (called a character special <strong>device</strong>) that will give out random bytes when read from. 10 lines from random byte stream will be a lot. Just pretend that this is a program you want to execute. How to make the output disappear? Here, we need another special device file called <code>/dev/null</code>. From its name we can know clearly that it represents a black hole. Everything written to this file will go away. Therefore, we have the solution: <code>head -n 10 /dev/urandom &gt; /dev/null</code>. </p>
<p>Now let’s see some advanced usage of redirection. We learned the 3 special file descriptors previously. Let’s use them here. First, we can specify which stream to redirect to. <code>1&gt;</code> will redirect <code>stdout(1)</code>, and <code>2&gt;</code> will redirect <code>stderr(2)</code>. The previous <code>&gt;</code> is just shorthand for <code>1&gt;</code>. Let’s choose a program that will print to both <code>stdout</code> and <code>stderr</code>. Most error messages will go to <code>stderr</code>. Let’s use <code>ls</code>. If you <code>ls</code> a file that doesn’t exist, it will report error. First, choose a file that exists in your current directory and a name that doesn’t exist in your directory. For me, I have <code>a.txt</code> in my directory, but no <code>b.txt</code>. Then, if I execute <code>ls a.txt b.txt</code>, it will print</p>
<pre class="line-numbers language-none"><code class="language-none">ls: cannot access &#39;b.txt&#39;: No such file or directory
a.txt<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre>

<p>The first line is from <code>stderr</code>, and the second line is from <code>stdout</code>. Let’s try to hide <code>stderr</code> using knowledge we have. Yes, <code>ls a.txt b.txt 2&gt;/dev/null</code> is correct. It will then only output <code>a.txt</code>. Similarly, <code>ls a.txt b.txt 1&gt;/dev/null</code> will only output <code>ls: cannot access &#39;b.txt&#39;: No such file or directory</code> to <code>stderr</code>. Now here comes the question. If a program only accepts <code>stdout</code>, how do I redirect <code>stderr</code> to <code>stdout</code>? The first option is using the knowledge we have. Remember <code>/dev/fd/1</code>? It’s a file! We can use <code>2&gt;/dev/fd/1</code>! Run <code>bash -c &quot;ls LICENSE a.txt 2&gt;/dev/fd/1&quot; &gt; /dev/null</code> to check that no output is generated. If you only run <code>bash -c &quot;ls LICENSE a.txt&quot; &gt; /dev/null</code>, you will also get the error message. However using this name is too long for file descriptors. Therefore, if you want to access a file descriptor for redirection, you can use the shorthand <code>&amp;&lt;fd&gt;</code>. In previous example, we can just write <code>bash -c &quot;ls LICENSE a.txt 2&gt;&amp;1&quot; &gt; /dev/null</code>, and <code>2&gt;&amp;1</code> is always the best way to redirect <code>stderr</code> to <code>stdout</code>. </p>
<h3 id="Pipes"><a href="#Pipes" class="headerlink" title="Pipes"></a>Pipes</h3><p>First of all, most GNU utility programs which accept files as inputs accept standard input. Let’s take <code>cat</code> as an example. The command <code>cat</code> is for printing contents of a file. It can print also the standard input. If you just type <code>cat</code> into the terminal and then you type something and hit <kbd>↵ Enter</kbd> (Windows) or <kbd>↵ Return</kbd> (Mac), you will see the exact same thing you typed in the output! But how is this even useful? Well, maybe not for <code>cat</code>, but for many other programs. </p>
<p>Let’s check again the <code>head</code> program. Suppose you have a file <code>numbers.txt</code>, which consists of the numbers 1 to 10, each on a line. If you execute <code>head -n 5 numbers.txt</code>, you will get 1 to 5 as expected. Also, if you run <code>head -n 5</code> alone, and you input 5 lines, they will be printed out. Now, let’s say you have a command that will output a lot of information. Let’s use <code>ip</code> for an example. <code>ip a</code> will show you all the network configurations for your computer. However, sometimes the output is very long. What if I only want the first result? Yes! Let’s use <code>head</code>! But wait… How to read the output from another program into the input of <code>head</code>? The answer is <strong>pipe</strong>! The format of pipes is <code>&lt;command1&gt; | &lt;command2&gt; | ... | &lt;commandN&gt;</code>. </p>
<p>Continue with the last example. We will use <code>ip a | head</code> to show the information of the first 10 lines. Next, I will introduce you a super useful command: <code>grep</code>. I plan to introduce this command gradually throughout this course, but here I will tell you the basic usage of it. Basically, it will show lines that contains a given regular expression. You can grep a file using <code>grep &lt;regex&gt; &lt;file&gt;...</code>, and here we want to use it to find lines within output of another command. Let’s check the model name of our CPU cores! The information about CPUs are stored in the file <code>/proc/cpuinfo</code>. If we only use grep, we can use <code>grep &quot;model name&quot; /proc/cpuinfo</code>. Then, let’s get the content of the file using <code>cat</code> and pretend that it’s not reading from a file, which is something <code>grep</code> can do. We can use <code>cat /proc/cpuinfo | grep &quot;model name&quot;</code>. More useful scenario is when we want to check the processes running in background. We have to use <code>ps</code> command standing for <strong>p</strong>roce<strong>s</strong>s. We can see <strong>all</strong> processes running by <code>ps -ef</code>. Let’s check if there is any <code>python</code> running. The command is <code>ps -ef | grep python</code>. If nothing show up, then no python is run on your computer. You can then check for other processes. </p>
<p>The last thing I want to tell you in this chapter is an interesting one-liner<sup><a href="#Notes-and-References">1</a></sup> to generate random strings in Bash. It’s useful when you want to generate temporary IDs or passwords. </p>
<pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token function">cat</span> /dev/urandom <span class="token operator">|</span> <span class="token function">tr</span> -dc A-Za-z0-9 <span class="token operator">|</span> <span class="token function">head</span> -c <span class="token number">13</span> <span class="token punctuation">;</span> <span class="token builtin class-name">echo</span> <span class="token string">''</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>

<p>You can remove the <code>echo</code> part to remove the new line character. For <code>tr</code>, it is used to select out the characters in the given regex pattern. <code>-c</code> for <code>head</code> is for number of characters. By this line, you can generate a 13-character long random string. An example usage of this command is as follows.</p>
<pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token assign-left variable">tmpfile</span><span class="token operator">=</span><span class="token variable"><span class="token variable">$(</span><span class="token function">cat</span> /dev/urandom <span class="token operator">|</span> <span class="token function">tr</span> -dc A-Za-z0-9 <span class="token operator">|</span> <span class="token function">head</span> -c <span class="token number">13</span><span class="token variable">)</span></span>
<span class="token function">hostname</span> -i <span class="token operator">></span> <span class="token variable">$tmpfile</span>
<span class="token function">ping</span> -c <span class="token number">1</span> <span class="token variable"><span class="token variable">$(</span><span class="token function">cat</span> $tmpfile<span class="token variable">)</span></span>
<span class="token function">rm</span> -f <span class="token variable">$tmpfile</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre>

<p>The grammar <code>$(...)</code> is just getting the output of a command as a string. A newer syntax for this is backticks <code>`...`</code>. This is an unnecessarily complicated example just to show you how to use this. Maybe a better one is just <code>ping -c 1 $(hostname -i)</code>.</p>
<h2 id="Notes-and-References"><a href="#Notes-and-References" class="headerlink" title="Notes and References"></a>Notes and References</h2><ol>
<li><a target="_blank" rel="noopener" href="https://unix.stackexchange.com/a/230676">Unix: How to generate a random string?</a></li>
</ol>
<hr>
<h6 align="right"><a href="#">Next</a> | <a href="/programming/linux/tutorial/preface">Home</a></h6>
</div></section><ul class="post-copyright"><li class="post-copyright-author"><strong>著者：</strong>Rebuild</li><li class="post-copyright-link"><strong>記事へのリンク：</strong><a href="https://www.rebuild.moe/programming/linux/tutorial/3-io/" title="GNU/Linux Introduction Chapter 3">https://www.rebuild.moe/programming/linux/tutorial/3-io/</a></li><li class="post-copyright-license"><strong>著作権表示：</strong>このブログ内のすべての記事は、特別な記載がない限り <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/deed.zh" target="_blank" rel="noopener" title="CC BY-NC-SA 4.0 "><svg class="icon"><use xlink:href="#icon-creative-commons-line"></use></svg><svg class="icon"><use xlink:href="#icon-creative-commons-by-line"></use></svg><svg class="icon"><use xlink:href="#icon-creative-commons-nc-line"></use></svg><svg class="icon"><use xlink:href="#icon-creative-commons-sa-line"></use></svg></a> の下のライセンスで保護されています。</li></ul></article><div class="post-nav"><div class="post-nav-item"><a class="post-nav-prev" href="/programming/pl/1-javascript/" rel="prev" title="Programming Language Chapter 1"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-arrow-left-s-line"></use></svg><span class="post-nav-text">Programming Language Chapter 1</span></a></div><div class="post-nav-item"><a class="post-nav-next" href="/programming/linux/tutorial/preface/" rel="next" title="GNU/Linux Introduction"><span class="post-nav-text">GNU/Linux Introduction</span><svg class="icon" aria-hidden="true"><use xlink:href="#icon-arrow-right-s-line"></use></svg></a></div></div></div><div class="hty-card" id="comment"><div class="comment-tooltip text-center"><span>在下方选择方式留言评论。</span><br><span>Comment below with different methods!</span><br><a class="hty-button hty-button--raised" id="github-issues" target="_blank" rel="noopener" href="https://github.com/Shimogawa/shimogawa.github.io/issues?q=is:issue+GNU/Linux Introduction Chapter 3">GitHub Issues</a></div><div class="toggle-comment-system" style="margin: 1rem auto"><a class="toggle-comment-btn hty-button hty-button--raised text-uppercase" data-target="#valine-container" onclick="showComment(this.dataset.target)">valine</a><style>.utterances {
  display: none;
}</style><a class="toggle-comment-btn hty-button hty-button--raised text-uppercase" data-target=".utterances" onclick="showComment(this.dataset.target)">utterances</a><script>function hideAllComment() {
  //- hide all
  document.querySelectorAll('.toggle-comment-btn').forEach((btn) => {
    const container = document.querySelector(btn.dataset.target);
    if (container) {
      container.style.display = "none";
    }
  });
}
function showComment(target) {
  hideAllComment();
  //- show target
  const targetContainer = document.querySelector(target);
  if (targetContainer) {
    targetContainer.style.display = "block";
  }
}
</script></div><div id="valine-container"></div><script>Yun.utils.getScript("https://cdn.jsdelivr.net/npm/valine@latest/dist/Valine.min.js", () => {
  const valineConfig = {"enable":true,"appId":"yhOSuPGGylx1z2fQesIekFsm-MdYXbMMI","appKey":"Qcvy0HlcSpaIiHVOqM1VO9tj","placeholder":"Your comment goes here...","avatar":null,"pageSize":10,"visitor":false,"highlight":true,"recordIP":true,"enableQQ":true,"meta":["nick","mail","link"],"lang":"en-us","requiredFields":["nick","mail"],"emojiCDN":"//i0.hdslb.com/bfs/emote/","emojiMaps":{"tv_doge":"6ea59c827c414b4a2955fe79e0f6fd3dcd515e24.png","tv_亲亲":"a8111ad55953ef5e3be3327ef94eb4a39d535d06.png","tv_偷笑":"bb690d4107620f1c15cff29509db529a73aee261.png","tv_再见":"180129b8ea851044ce71caf55cc8ce44bd4a4fc8.png","tv_冷漠":"b9cbc755c2b3ee43be07ca13de84e5b699a3f101.png","tv_发怒":"34ba3cd204d5b05fec70ce08fa9fa0dd612409ff.png","tv_发财":"34db290afd2963723c6eb3c4560667db7253a21a.png","tv_可爱":"9e55fd9b500ac4b96613539f1ce2f9499e314ed9.png","tv_吐血":"09dd16a7aa59b77baa1155d47484409624470c77.png","tv_呆":"fe1179ebaa191569b0d31cecafe7a2cd1c951c9d.png","tv_呕吐":"9f996894a39e282ccf5e66856af49483f81870f3.png","tv_困":"241ee304e44c0af029adceb294399391e4737ef2.png","tv_坏笑":"1f0b87f731a671079842116e0991c91c2c88645a.png","tv_大佬":"093c1e2c490161aca397afc45573c877cdead616.png","tv_大哭":"23269aeb35f99daee28dda129676f6e9ea87934f.png","tv_委屈":"d04dba7b5465779e9755d2ab6f0a897b9b33bb77.png","tv_害羞":"a37683fb5642fa3ddfc7f4e5525fd13e42a2bdb1.png","tv_尴尬":"7cfa62dafc59798a3d3fb262d421eeeff166cfa4.png","tv_微笑":"70dc5c7b56f93eb61bddba11e28fb1d18fddcd4c.png","tv_思考":"90cf159733e558137ed20aa04d09964436f618a1.png","tv_惊吓":"0d15c7e2ee58e935adc6a7193ee042388adc22af.png","tv_打脸":"56ab10b624063e966bfcb76ea5dc4794d87dfd47.png","tv_抓狂":"fe31c08edad661d63762b04e17b8d5ae3c71a757.png","tv_抠鼻":"c666f55e88d471e51bbd9fab9bb308110824a6eb.png","tv_斜眼笑":"911f987aa8bc1bee12d52aafe62bc41ef4474e6c.png","tv_无奈":"ea8ed89ee9878f2fece2dda0ea8a5dbfe21b5751.png","tv_晕":"5443c22b4d07fb1907ccc610c8e6db254f2461b7.png","tv_流汗":"cead1c351ab8d79e9f369605beb90148db0fbed3.png","tv_流泪":"7e71cde7858f0cd50d74b0264aa26db612a8a167.png","tv_流鼻血":"c32d39db2737f89b904ca32700d140a9241b0767.png","tv_点赞":"f85c354995bd99e28fc76c869bfe42ba6438eff4.png","tv_生气":"26702dcafdab5e8225b43ffd23c94ac1ff932654.png","tv_生病":"8b0ec90e6b86771092a498c54f09fc94621c1900.png","tv_疑问":"0793d949b18d7be716078349c202c15ff166f314.png","tv_白眼":"c1d59f439e379ee50eef488bcb5e5378e5044ea4.png","tv_皱眉":"72ccad6679fea0d14cce648b4d818e09b8ffea2d.png","tv_目瞪口呆":"0b8cb81a68de5d5365212c99375e7ace3e7891b7.png","tv_睡着":"8b196675b53af58264f383c50ad0945048290b33.png","tv_笑哭":"1abc628f6d4f4caf9d0e7800878f4697abbc8273.png","tv_腼腆":"89712c0d4af73e67f89e35cbc518420380a7f6f4.png","tv_色":"61822c7e9aae5da76475e7892534545336b23a6f.png","tv_调侃":"4bc022533ef31544ca0d72c12c808cf4a1cce3e3.png","tv_调皮":"b9c41de8e82dd7a8515ae5e3cb63e898bf245186.png","tv_鄙视":"6e72339f346a692a495b123174b49e4e8e781303.png","tv_闭嘴":"c9e990da7f6e93975e25fd8b70e2e290aa4086ef.png","tv_难过":"87f46748d3f142ebc6586ff58860d0e2fc8263ba.png","tv_馋":"fc7e829b845c43c623c8b490ee3602b7f0e76a31.png","tv_鬼脸":"0ffbbddf8a94d124ca2f54b360bbc04feb6bbfea.png","tv_黑人问号":"45821a01f51bc867da9edbaa2e070410819a95b2.png","tv_鼓掌":"1d21793f96ef4e6f48b23e53e3b9e42da833a0f6.png"},"el":"#valine-container"}
  valineConfig.path = "/programming/linux/tutorial/3-io/"
  new Valine(valineConfig)
}, window.Valine);</script><style>.utterances {
  max-width: 100%;
}</style><script src="https://utteranc.es/client.js" repo="Shimogawa/shimogawa.github.io" issue-term="pathname" label="utter" theme="github-light" crossorigin="anonymous" async></script></div></main><footer class="sidebar-translate" id="footer"><div class="copyright"><span>&copy; 2019 – 2022 </span><span class="with-love" id="animate"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-cloud-line"></use></svg></span><span class="author"> Rebuild</span></div><div class="powered"><span>Powered by <a href="https://hexo.io" target="_blank" rel="noopener">Hexo</a> v5.4.1</span><span class="footer-separator">|</span><span>Theme - <a rel="noopener" href="https://github.com/YunYouJun/hexo-theme-yun" target="_blank"><span>Yun</span></a> v1.8.11</span></div></footer><a class="hty-icon-button" id="back-to-top" aria-label="back-to-top" href="#"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-arrow-up-s-line"></use></svg><svg class="progress-circle-container" viewBox="0 0 100 100"><circle class="progress-circle" id="progressCircle" cx="50" cy="50" r="48" fill="none" stroke="#0078E7" stroke-width="2" stroke-linecap="round"></circle></svg></a><a class="popup-trigger hty-icon-button icon-search" id="search" href="javascript:;" title="検索"><span class="site-state-item-icon"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-search-line"></use></svg></span></a><script>window.addEventListener("DOMContentLoaded", () => {
  // Handle and trigger popup window
  document.querySelector(".popup-trigger").addEventListener("click", () => {
    document.querySelector(".popup").classList.add("show");
    setTimeout(() => {
      document.querySelector(".search-input").focus();
    }, 100);
  });

  // Monitor main search box
  const onPopupClose = () => {
    document.querySelector(".popup").classList.remove("show");
  };

  document.querySelector(".popup-btn-close").addEventListener("click", () => {
    onPopupClose();
  });

  window.addEventListener("keyup", event => {
    if (event.key === "Escape") {
      onPopupClose();
    }
  });
});
</script><script src="/js/search/local-search.js" defer type="module"></script><div class="popup search-popup"><div class="search-header"><span class="popup-btn-close close-icon hty-icon-button"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-close-line"></use></svg></span></div><div class="search-input-container"><input class="search-input" id="local-search-input" type="text" placeholder="検索..." value=""></div><div id="local-search-result"></div></div><script>function initMourn() {
  const date = new Date();
  const today = (date.getMonth() + 1) + "-" + date.getDate()
  const mourn_days = ["4-4","9-18"]
  if (mourn_days.includes(today)) {
    document.documentElement.style.filter = "grayscale(1)";
  }
}
initMourn();</script></div></body></html>